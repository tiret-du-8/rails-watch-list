<div class="p-3">
  <h1><%= @list.name %></h1>

  <%# link_to "Add a movie", new_list_bookmark_path(@list) %>
  <div class="card shadow p-3 mb-3 bg-white rounded">
    <%= simple_form_for [@list, @bookmark] do |f| %>
      <div class="d-flex justify-content-start align-items-start">
        <div class="mx-3">
          <%= f.association :movie, collection: Movie.order(:title), prompt: "Choose a movie", label: false %>
        </div>
        <div class="mx-3">
          <%= f.input :comment, placeholder: "Add a comment", label: false %>
        </div>
        <div class="mx-3">
          <%= f.submit "Add movie", class: "btn btn-primary" %>
        </div>
      </div>
    <% end %>
  </div>

  <div class="d-flex justify-content-start align-content-between flex-wrap">
    <% @list.movies.each do |movie| %>
      <% bookmark = Bookmark.find_by(list: @list, movie: movie) %>
        <div class="card shadow mb-3 bg-white rounded m-2" style="width: 24rem;">
          <img class="card-img-top" src="<%= movie.poster_url %>" alt="">
          <div class="card-body d-flex flex-column justify-content-between">
            <div>
              <h5 class="card-title"><%= movie.title %></h5>
              <div class="my-1"><span class="alert alert-secondary p-1"><%= movie.rating %></span></div>
              <p class="card-text"><%= movie.overview %></p>
            </div>
            <div class="d-flex pt-3">
              <i class="fas fa-quote-left me-2"></i><small class="flex-grow-1"><%= bookmark.comment %></small>
              <%= link_to "Delete", bookmark_path(bookmark), data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to remove #{movie.title} from your #{@list.name} list ?"}, class: 'text-danger' %>
            </div>
          </div>
        </div>
    <% end %>
  </div>

  <%= link_to "Back to my lists", lists_path %>
</div>
